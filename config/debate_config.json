{
  "target_text": "",
  "Disagreed": "",
  "meta_prompt": "You are participating in a multi-role coding debate.\n\nTarget Text (fixed for the session)\n-----------------------------------\n\"[Target Text]\"   # pre-numbered; quote lines as 【L x-y】\n\nDisagreement Code now in focus\n------------------------------\n\"[code and justification]\"\n\nRoles will speak one at a time, each following the Role prompt below.",
  "role_prompt": "You are a Role: \"[role]\"\n\nwith a background in \"[Disciplinary Background]\"\n\nPerspective: \"[Perspective]\"\n\n[meta prompt]\n\nEveryone must abide by the following rules:\n\nShared rules:\n1. Quote text with 【L x-y】; if the text has no explicit line\nnumbers, treat each sentence (delimited by ., ?, !, or ？ ！) as one line.\n no external knowledge.\n2. Do NOT use the keywords accept / merge / drop.\n\nROUND 1 rules:\n1. ≤120 tokens: explain, from your role’s perspective, why the\n   code should be kept / merged / dropped. And present your \n   main evidence as a concise numbered list (1. 2. 3 …)\n\nROUND 2~n rules:\n1. Start with “Self-reflection: …” (≤30 tokens) – note any stance\n   change.\n2. In ≤90 tokens, rebut key points from *all* other roles’ Round 1\n   and present your new evidence or do not.",
  "role debater(old)": {
    "round 1": "You argue the code:'[code]'(keep or drop or merge), \nand its disagreed  justification: '[justification]'.\n1. ≤150 tokens: explain, from your role’s perspective, why the\n   code should be kept / merged / dropped.\n2. Quote target text with 【L x-y】; no external knowledge.\n3. Do NOT use the keywords accept / merge / drop.",
    "round 2": "1. Start with “Self-reflection: …” (≤30 tokens) – note any stance\n   change.\n2. In ≤120 tokens, rebut key points from *all* other roles’ Round 1\n   and add new evidence.\n3. Quote text with 【L x-y】; no external knowledge.\n4. Do NOT use accept / merge / drop.\nThe digest of other roles’ Round 1 arguments:\n[opponent]",
    "closing": "Please output a closing statement, and you must choose one of the following three options:\n• accept - keep the original code\n• merge to [NewCode] - propose a merge/rename\n• drop - suggest abandoning the code\n\nOUTPUT EXACTLY TWO LINES:\n\nLine 1  (keyword only)   →  accept   |   drop   |   merge to <NewCode>\nLine 2  JSON rationale   →  {\"rationale\": \"< ≤50-token reason>\"}\n\nNo additional text."
  },
  "role debater": {
    "point": "You argue the code:'[code]'(keep or drop or merge), \nand its disagreed  justification: '[justification]'.\n1.",
    "round 2~n": "The digest of other roles’ Previous round arguments:\n[opponent]",
    "closing": "Please output a closing statement, and you must choose one of the following three options:\n• accept - keep the original code\n• merge to [NewCode] - propose a merge/rename\n• drop - suggest abandoning the code\n\nOUTPUT EXACTLY TWO LINES:\n\nLine 1  (keyword only)   →  accept   |   drop   |   merge to <NewCode>\nLine 2  JSON rationale   →  {\"rationale\": \"< ≤50-token reason>\"}\n\nNo additional text."
  },
  "Judge": "You are the JUDGE for this code debate.\n\nThe debate was as follows:\n\n--- ROUND-1 ---\n\nALL_ROLES_R1: [ALL_ROLES_R1]\n\n--- ROUND-2 ---\n\nALL_ROLES_R2:  [ALL_ROLES_R2]\n\n--- ROUND-3 ---\n\nALL_ROLES_R3:  [ALL_ROLES_R3]\n\n--- CLOSING ---\n\nALL_ROLES Closing: [ROLE_A_CLOSE]\n\n================================================================\n⚖\uFE0F  DECISION LOGIC\n\nSTEP 1 · CONSENSUS\n\nIf *all* keyword lines are identical:\n  • all “accept”            → Resolution = Keep\n  • all “drop”              → Resolution = Drop\n  • all “merge to X”        → Resolution = Merge, final_code = X\n→ decision_mode = \"Consensus\"\n\n• Otherwise → “Forced” mode (proceed to STEP 2)\n\nSTEP 2 · FORCED\n\nRead all Round 1 & Round 2 messages and pick the outcome that is **best-supported** by:\n\na. strength and accuracy of textual evidence;\n\nb. precision / information value of the proposed label;\n\nc. any concessions in Self-Reflection lines.\n\nIf action = Merge, invent a concise final_code.\n\n• The new code name (final_code) must be given when Merge\n\n================================================================\nOUTPUT  – ONE LINE OF VALID JSON ONLY\n\n{\n  \"decision_mode\": \"Consensus\" | \"Forced\",\n  \"Resolution\": \"Keep\" | \"Merge\" | \"Drop\",\n  \"final_code\": \"<code name if Keep or Merge, or null if Drop>\",\n  \"briefly explain\": \"<30-60 token explanation>\",\n  \"evidence\": [\"[ROLE_A_CLOSE]\", \"[ROLE_B_CLOSE]\", \"[ROLE_C_CLOSE]\"]\n}\nNo extra keys or text. JSON must be on one line.\n\n### ✅  Key Fixes Implemented\n1. **Consensus check now scans *all* roles’ keywords.**  \n2. **Closing keyword is plain-text first line** → Judge can regex it easily.  \n3. **Keyword vocabulary unified** (`accept / drop / merge to X`) and maps directly to Judge output (`Keep / Drop / Merge`).  \n4. **Forced-merge rule clarified** (require majority same name, else Judge coins one).\n\nPlug these prompts into your pipeline and they will interoperate without mismatches."
}